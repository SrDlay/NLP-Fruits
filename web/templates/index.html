<!DOCTYPE html>
<html lang="pt_BR">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" 
  integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" 
  crossorigin="anonymous" 
  referrerpolicy="no-referrer" />
  <title>NLP Fruits</title>
</head>

<body >
    <div class="bg-green-50 h-screen flex items-center justify-center">
      <div class="container m-auto">
        <div class="flex flex-col items-center justify-center bg-green-50 rounded-xl px-10">
          
          <!-- Cabeçalho -->
          <div class="flex flex-col text-center text-slate-800/90 p-8 pb-20 space-y-2">
            <span class="font-extrabold text-4xl">Processamento de Linguagem Natural</span>
            <span class="text-3xl">Trabalho de implementação</span>
          </div>

          <!-- Fruits Cards Section -->
          <div class="w-full flex items-center justify-center px-8">
            <div id="Fruits Cards" class="grid grid-cols-2 gap-8">
        
              <!-- Fruits Cards -->
              <div class="flex w-full h-36 shadow-2xl shadow-green-200 rounded-lg bg-slate-50 group hover:scale-105 duration-300 cursor-pointer overflow-hidden border-r-4 hover:border-yellow-400 border-green-400">
                <div class="overflow-hidden w-48">
                  <img class="rounded-l-lg overflow-auto group-hover:scale-110 transition-all duration-[2000ms] ease-out"
                  src="https://images.immediate.co.uk/production/volatile/sites/30/2017/06/oranges-85fb2b6.jpg?quality=90&webp=true&resize=300,272"/>
                </div>
                <div class="flex flex-col p-4">
                  <span class="font-bold text-slate-800 text-2xl">Laranja</span>
                  <span class="text-lg text-slate-600">A fruta é uma fonte natural de fibras, vitamina C, folato e antioxidantes.</span>
                  <span class="text-lg text-slate-800">Vit. C: 15% ● Carb: 11g ● Cal: 47kcal</span>
                </div>
              </div>
        
              <div class="flex w-full h-36 shadow-2xl shadow-green-200 rounded-lg bg-slate-50 group hover:scale-105 duration-300 cursor-pointer overflow-hidden border-r-4 hover:border-yellow-400 border-green-400">
                <div class="overflow-hidden w-48">
                  <img class="rounded-l-lg overflow-auto group-hover:scale-110 transition-all duration-[2000ms] ease-out"
                  src="https://images.immediate.co.uk/production/volatile/sites/30/2017/06/oranges-85fb2b6.jpg?quality=90&webp=true&resize=300,272"/>
                </div>
                <div class="flex flex-col p-4">
                  <span class="font-bold text-slate-800 text-2xl">Laranja</span>
                  <span class="text-lg text-slate-600">A fruta é uma fonte natural de fibras, vitamina C, folato e antioxidantes.</span>
                  <span class="text-lg text-slate-800">Vit. C: 15% ● Carb: 11g ● Cal: 47kcal</span>
                </div>
              </div>
              
              <div class="flex w-full h-36 shadow-2xl shadow-green-200 rounded-lg bg-slate-50 group hover:scale-105 duration-300 cursor-pointer overflow-hidden border-r-4 hover:border-yellow-400 border-green-400">
                <div class="overflow-hidden w-48">
                  <img class="rounded-l-lg overflow-auto group-hover:scale-110 transition-all duration-[2000ms] ease-out"
                  src="https://images.immediate.co.uk/production/volatile/sites/30/2017/06/oranges-85fb2b6.jpg?quality=90&webp=true&resize=300,272"/>
                </div>
                <div class="flex flex-col p-4">
                  <span class="font-bold text-slate-800 text-2xl">Laranja</span>
                  <span class="text-lg text-slate-600">A fruta é uma fonte natural de fibras, vitamina C, folato e antioxidantes.</span>
                  <span class="text-lg text-slate-800">Vit. C: 15% ● Carb: 11g ● Cal: 47kcal</span>
                </div>
              </div>
        
              <div class="flex w-full h-36 shadow-2xl shadow-green-200 rounded-lg bg-slate-50 group hover:scale-105 duration-300 cursor-pointer overflow-hidden border-r-4 hover:border-yellow-400 border-green-400">
                <div class="overflow-hidden w-48">
                  <img class="rounded-l-lg overflow-auto group-hover:scale-110 transition-all duration-[2000ms] ease-out"
                  src="https://images.immediate.co.uk/production/volatile/sites/30/2017/06/oranges-85fb2b6.jpg?quality=90&webp=true&resize=300,272"/>
                </div>
                <div class="flex flex-col p-4">
                  <span class="font-bold text-slate-800 text-2xl">Laranja</span>
                  <span class="text-lg text-slate-600">A fruta é uma fonte natural de fibras, vitamina C, folato e antioxidantes.</span>
                  <span class="text-lg text-slate-800">Vit. C: 15% ● Carb: 11g ● Cal: 47kcal</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Texto transcrito e botão de gravação -->
          <div class="flex justify-center items-center mt-16 p-8">
            <div class="w-full flex flex-col items-center space-y-6">
              <div class="flex items-center rounded-full bg-white shadow-2xl w-fit h-0 p-6 max-w-2xl outline outline-2 outline-green-300 italic">
                <span id="text-label" class="text-2xl text-center text-slate-700 font-semibold whitespace-nowrap truncate">"Ex.: Frutas ricas em vitamina C"</span>
              </div>
              <button onclick="recordAudio()" class="text-4xl w-24 h-20 bg-white rounded-full hover:bg-white/80 duration-300 shadow-lg shadow-green-200">
                <i class="fa-solid fa-microphone"></i>
              </button>
            </div>
        </div>
      </div>
  </div>
</body>

<script>
  async function recordAudio (){
    const audio = navigator.mediaDevices.getUserMedia({ audio: true })

    .then(stream => {
      const mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.start();

      const audioChunks = [];

      mediaRecorder.addEventListener("dataavailable", event => {
        audioChunks.push(event.data);
      });

      mediaRecorder.addEventListener("stop", () => {
        console.log(audioChunks);
        const audioBlob = new Blob(audioChunks);
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = new Audio(audioUrl);
      });

    setTimeout(() => {
      mediaRecorder.stop();
    }, 5000);

    return audioChunks
  });

  const text = await fetch('http://localhost:5500/whisper', {
    method: 'POST',
    body: JSON.stringify({files: audio})
  })
  console.log(audioChunks, text)
  
  document.querySelector('#text-label').innerHTML = text
  
};
</script>
</html>
